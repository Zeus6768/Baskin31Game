<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../home.css">
    <title>31Game-ready</title>
</head>

<body>

<div class="icon">
    <h2>나가기
        <img src="../image/icon/logout.png" width="40"> </h2>
    <br>
</div>

<div id="image">
    <img src="../image/iceCream/almondBonbon.png" width="250">
    <img src="../image/iceCream/mintChoco.png" width="250">
    <img src="../image/iceCream/momIsAlien.png" width="250">
    <img src="../image/iceCream/newYorkCheese.png" width="250">
    <img src="../image/iceCream/shootingStar.png" width="250">

    <br>
    <% for (let user of users) { %>
        <h2 class="name"><%= user %></h2>
    <% } %>
    <% for (let i=0; i < 5-users.length; i++) { %>
        <h2 class="name">대기중...</h2>
    <% } %>
    <br><br><br>

</div>

<div id="ready">
    <p>5명이 모두 들어오면 시작할 수 있습니다.</p>
    <button id="restart" type="button">시작하기</button>
</div>

</body>

<footer>
    KAU 2022-1 김서현, 신재우, 장예빈, 정수현, 철멍어드
</footer>

</html>

<script>
    const webSocket = new WebSocket("ws://localhost:15001");

    function sayHi() {
        webSocket.send("Hello");
    }

    webSocket.onopen = () => {
        const name = "<%= username %>"
        console.log("웹소켓 서버 연결 성공");
        webSocket.send(name);
    }

    webSocket.onmessage = (event) => {
        console.log(`서버로부터 받은 메시지: ${event.data}`);
    }

    webSocket.onclose = () => {
        console.log("웹소켓 서버 연결 종료");
    }

    webSocket.onerror = (event) => {
        console.log(event);
    }
</script>